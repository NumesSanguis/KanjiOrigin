#:kivy 1.9.0
#:import Keyboard kivy.factory.Factory

<sKanjiButton@Button>:
    font_size: '16sp'
    font_name: 'data/fonts/TakaoPMincho.ttf'

#<LayoutFunction>:


KanjiOriginScreen:
	name: 'LearnKanji'
	fullscreen: True

	BoxLayout:
        orientation: 'vertical'
        #size_hint_y: None
        #height: '48dp'

        #Widget with the to be learned Kanji
        Label:
            id: learn_kanji
            size_hint: 1, 0.42
            font_size: '160sp'
            #90*self.height*0.006
            font_name: root.font_kanji
            text: "BS" #root.character[0]
            #text_size: self.width, None
            color: 0, 0, 0, 1
            #size: self.texture_size
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

        #A button with the correct answers (hidden at first)
        Button:
            id: answer_bar
            size_hint: 1, 0.07
            font_size: '16sp'
            text: "Love, Affection"
            background_color: 0, .7, 0, 1
            opacity: 0

        #Containing the text-input widget and send button
        BoxLayout:
            size_hint_y: 0.07
            orientation: 'horizontal'

            AnswerTextInput:
                id: txt_field
                #design1:design1
                text: ""
                font_size: '20sp'
                #font_name: root.font_kanji
                multiline: False
                size_hint_x: .8
                #on_text: self.root.autoCorrectText()

            Button:
                id: send_btn
                size_hint_x: .2
                font_size: '14sp'
                text: "Check"
                #Calls function for handling typed text
                on_release: root.btnPressed(txt_field.text)
                #root.add_widget(answer_bar)

        #Containing STORY from DATABASE and small Kanji buttons
        BoxLayout:
            size_hint: 1, None
            #size: 1, root.keyb_height
            height: root.keyb_height
            #height: Keyboard.keyboard_height
            orientation: 'horizontal'
            canvas.before:
                Color:
                    rgba: .8, 1, .8, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            #STORY about the to be learned Kanji (or small Kanji's)
            ScrollView:
                id: story
                text: "Don't peak!" #root.character[1]
                size_hint_x: .8
                Label:
                    text: self.parent.text
                    font_size: '16sp'
                    text_size: self.width-10, None
                    font_name: root.font_kanji
                    #blurs text:
                    size_hint_y: None
                    #pos: self.parent.width*.2, self.parent.height*.8
                    #size: self.parent.size[0] * .05, self.parent.size[1] * .05
                    #size = size_hint * parent.size, pos = pos_hint * parent.size
                    height: int(self.texture_size[1]+10)
                    valign: 'top'
                    color: 0, 0, 0, 1